USE db

CREATE TABLE GROUPS (
    GROUP_ID INTEGER PRIMARY KEY,
    name VARCHAR(50),
    course INTEGER
);

CREATE TABLE SUBJECTS (
    SUB_ID INTEGER PRIMARY KEY,
    name VARCHAR(100),
    hours INTEGER
);

CREATE TABLE STUDENTS (
    STUDENT_ID INTEGER PRIMARY KEY,
    FIRST_NAME VARCHAR(50),
    LAST_NAME VARCHAR(50),
    PATRONYMIC VARCHAR(50),
    BIRTH DATE,
    GROUP_ID INTEGER,
    FOREIGN KEY (GROUP_ID) REFERENCES GROUPS(GROUP_ID)
);

CREATE TABLE PLAN_STUDY (
    GROUP_ID INTEGER,
    SUB_ID INTEGER,
    PRIMARY KEY (GROUP_ID, SUB_ID),
    FOREIGN KEY (GROUP_ID) REFERENCES GROUPS(GROUP_ID),
    FOREIGN KEY (SUB_ID) REFERENCES SUBJECTS(SUB_ID)
);


INSERT INTO GROUPS VALUES 
(135, 'PO135', 1),
(235, 'PO235', 2),
(335, 'PO335', 3),
(134, 'PO134', 1);

INSERT INTO SUBJECTS VALUES 
(1, 'Physics', 200),
(2, 'Mathematics', 120),
(3, 'Algorithm Basics', 70),
(4, 'Database Design', 130),
(5, 'Visual Programming Tools', 90),
(6, 'Object-Oriented Programming', 70);

INSERT INTO STUDENTS VALUES 
(1, 'P.', 'Fedorenko', 'R.', '1997-12-25', 135),
(2, 'O.', 'Zingel', NULL, '1985-12-25', 135),
(3, 'N.', 'Savitskyan', NULL, '1987-09-22', 235),
(4, 'M.', 'Kovalchuk', 'E.', '1992-06-17', 235),
(5, 'T.', 'Kovrigo', 'R.', '1992-05-13', 335),
(6, 'N.', 'Sharapo', NULL, '1992-08-14', 335);

INSERT INTO PLAN_STUDY VALUES 
(135, 1), (135, 2),
(235, 3), (235, 4),
(335, 5), (335, 6);


UPDATE STUDENTS 
SET GROUP_ID = 134 
WHERE GROUP_ID = 135;

DELETE FROM PLAN_STUDY WHERE GROUP_ID = 135;
DELETE FROM GROUPS WHERE GROUP_ID = 135;


UPDATE SUBJECTS
SET hours = hours + 30


ALTER TABLE SUBJECTS ADD  
CONTROL_FORM VARCHAR(20);

UPDATE SUBJECTS
SET CONTROL_FORM = CASE
    WHEN name = 'Algorithm Basics' THEN 'Pass'
    ELSE 'Exam'
END;

ALTER TABLE STUDENTS DROP COLUMN PATRONYMIC;



SELECT * FROM GROUPS;
SELECT * FROM SUBJECTS;
SELECT * FROM STUDENTS;
SELECT * FROM PLAN_STUDY;









